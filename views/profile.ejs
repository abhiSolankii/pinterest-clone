<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Pinterest-Profile</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/stylesheets/profile.css" />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body class="bg-gray-800">
    <%- include('./components/navbar.ejs') %>
    <div class="containerpers">
      <form
        class="hidden"
        action="/pfp-upload"
        id="pfp-upload-form"
        method="post"
        enctype="multipart/form-data"
      >
        <input type="file" name="pfp" />
      </form>
      <div class="cardpers">
        <div id="profile-picture" class="profile-picture shadow-xl">
          <img
            src="/images/uploads/<%= user.profileImage %>"
            alt="Profile Picture"
          />
        </div>

        <h2 class="fullname text-2xl"><%= user.fullname %></h2>
        <h3 class="username">@<%= user.username %></h3>
        <p class="tagline mb-3">
          Lorem ipsum dolor sit, amet consectetur adipisicing.
        </p>
        <!-- <p class="description">
          Lorem ipsum dolor, sit amet consectetur adipisicing elit. Facere.
        </p> -->
        <a href="/edit" class="button">Edit</a>
        <a href="/logout" class="button">Logout</a>
        <a href="/add" class="button bg-black text-white">Post</a>
      </div>
    </div>

    <div class="container">
      <div class="cards flex flex-wrap gap-10 p-10 mt10">
        <div class="card p-2 rounded-sm shadow-sm">
          <div class="w-52 h-40 bg-zinc-200 rounder-lg">
            <img
              class="w-full h-full object-cover overflow-hidden"
              src="/images/uploads/<%= user?.posts[0]?.image %>"
            />
          </div>
          <a href="/show/posts" class="text-xl font-semibold mt-3"
            >Your Uploaded posts</a
          >
          <h5 class="text-sm font-medium opacity-60">
            <%= user.posts.length %> Posts
          </h5>
        </div>
      </div>
    </div>
    <script>
      document
        .querySelector("#profile-picture")
        .addEventListener("click", function () {
          document.querySelector("#pfp-upload-form input").click();
        });

      document
        .querySelector("#pfp-upload-form input")
        .addEventListener("change", function () {
          document.querySelector("#pfp-upload-form").submit();
        });
    </script>
  </body>
</html>
